# System Architecture Overview

### High-Level Architecture Diagram

```
┌─────────────────────────────────────────────────────────────────┐
│                         User's Browser                          │
│                    (React + Tailwind UI)                        │
└────────────────┬────────────────────────────────────────────────┘
                 │
                 │ HTTPS (Railway Domain)
                 │
┌────────────────▼────────────────────────────────────────────────┐
│                      FastAPI Application                        │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  Static File Serving (React Build)                       │  │
│  └──────────────────────────────────────────────────────────┘  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  REST API Endpoints                                      │  │
│  │  POST /api/query                                         │  │
│  │  GET /api/health                                         │  │
│  └──────────────┬───────────────────────────────────────────┘  │
│                 │                                                │
│  ┌──────────────▼───────────────────────────────────────────┐  │
│  │  Business Logic Layer                                    │  │
│  │  ┌────────────────┐  ┌──────────────┐  ┌─────────────┐  │  │
│  │  │ Query Service  │  │ Ragas Service│  │ Auth (TBD)  │  │  │
│  │  └────────┬───────┘  └──────┬───────┘  └─────────────┘  │  │
│  └───────────┼──────────────────┼──────────────────────────┘  │
│              │                  │                              │
│  ┌───────────▼────────┐  ┌──────▼──────────────────────────┐  │
│  │  LLM Integration   │  │  Evaluation Engine              │  │
│  │  (OpenAI Client)   │  │  (Ragas Framework)              │  │
│  └───────────┬────────┘  └─────────────────────────────────┘  │
│              │                                                  │
│  ┌───────────▼──────────────────────────────────────────────┐  │
│  │  Security & Validation Layer                             │  │
│  │  - SQL Parser (sqlparse)                                 │  │
│  │  - Query Validator (whitelist SELECT)                   │  │
│  │  - Input Sanitization                                    │  │
│  └───────────┬──────────────────────────────────────────────┘  │
│              │                                                  │
│  ┌───────────▼──────────────────────────────────────────────┐  │
│  │  Data Access Layer                                       │  │
│  │  (SQLAlchemy ORM)                                        │  │
│  └───────────┬──────────────────────────────────────────────┘  │
└──────────────┼──────────────────────────────────────────────────┘
               │
               │ TCP (Read-Only User)
               │
┌──────────────▼──────────────────────────────────────────────────┐
│              PostgreSQL Database (Railway)                      │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  employees table                                         │  │
│  │  query_logs table (optional)                            │  │
│  └──────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
```

**Key Flows:**

1. **Query Flow:** User Input → React → API → LLM (NL→SQL) → Validator → DB → Results → React
2. **Evaluation Flow:** Results + Query → Ragas → Metrics → React Display
3. **Static Serving:** Browser Request → FastAPI Static Handler → React Build Files

---
